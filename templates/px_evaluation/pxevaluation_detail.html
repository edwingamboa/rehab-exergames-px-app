{% extends "detail_base.html" %}
{% load staticfiles %}

{% block pre-breadcrumbs %}{% include "./pre_breadcrumbs_pxevaluation.html" %}{% endblock pre-breadcrumbs %}

{% block card_description %}PX Evaluation Details{% endblock %}

{% block card_content %}
<ul class="timeline">
    <!-- timeline item -->
    <li>
        <i class="fa {% if object.current_stage == 'rehab_env_analysis' or object.current_stage == 'eval_goal_def' or object.current_stage == 'aspects_sel' or object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}bg-green{% endif %}"><b>1</b></i>
        <div class="timeline-item">
            {% if object.current_stage == 'rehab_env_analysis' %}
                <span class="time"><i class="fa fa-flag-o"></i> Current stage</span>
            {% endif %}
            <h3 class="timeline-header">Rehabilitation Environment Analysis</h3>
            {% if object.current_stage == 'rehab_env_analysis' or object.current_stage == 'eval_goal_def' or object.current_stage == 'aspects_sel' or object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}
            <div class="timeline-body">
                <dl>
                    <dt>Rehabilitation exergame characterisation</dt>
                    <dd>
                        <ul class="products-list product-list-in-box">
                            <li class="item">
                                {% if object.rehab_exergame_characterisation.image_url %}
                                <div class="product-img">
                                    <img class="img-circle" src="{{ object.rehab_exergame_characterisation.image_url }}" alt="{{ object.rehab_exergame_characterisation }} rehabilitation exergame image">
                                </div>
                                {% endif %}
                                <div class="product-info">
                                    <a href="{% url 'rehab_exergames:detail' object.rehab_exergame_characterisation.id %}">{{ object.rehab_exergame_characterisation }}
                                        <span class="pull-right"><i class="fa fa-eye"></i></span></a>
                                    <span class="product-description">
                                      {{ object.rehab_exergame_characterisation.description }}
                                    </span>
                                </div>
                            </li>
                        </ul>
                    </dd>
                    <dt>Players characterisation</dt>
                    <dd>{% if object.players_characterisation %}
                        <a target="_blank" href="{{ object.players_characterisation.url }}"> {{ object.players_characterisation.name }} <i class="fa fa-download"></i></a>
                        {% else %}
                        <span class="text-muted">None</span>
                        {% endif %}
                    </dd>
                    <dt> Rehabilitation constraints</dt>
                    <dd>
                        <ul class="nav nav-pills nav-stacked">
                            {% for constraint in object.rehabilitation_constraints.all %}
                            <li><a href="{% url 'rehab_exergames:detail_constraint' constraint.id %}">{{ constraint }}<span class="pull-right text-blue"><i class="fa fa-eye"></i></span></a></li>
                            {% empty %}
                            <span class="text-muted">No associated aspects</span>
                            {% endfor %}
                        </ul>
                    </dd>
                </dl>
            </div>
            {% endif %}
        </div>
    </li>
    <!-- END timeline item -->
    <!-- timeline item -->
    <li>
        <i class="fa {% if object.current_stage == 'eval_goal_def' or object.current_stage == 'aspects_sel' or object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}bg-aqua{% endif %}"><b>2</b></i>
        <div class="timeline-item">
            {% if object.current_stage == 'eval_goal_def' %}
                <span class="time"><i class="fa fa-flag-o"></i> Current stage</span>
            {% endif %}
            <h3 class="timeline-header">Evaluation goal</h3>
            {% if object.current_stage == 'eval_goal_def' or object.current_stage == 'aspects_sel' or object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}
            <div class="timeline-body">
                <p>
                    {% if object.evaluation_goal %}
                    {{ object.evaluation_goal }}
                    {% else %}
                    <span class="text-muted">None</span>
                    {% endif %}
                </p>
            </div>
            {% endif %}
        </div>
    </li>
    <!-- END timeline item -->
    <!-- timeline item -->
    <li>
        <i class="fa {% if object.current_stage == 'aspects_sel' or object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}bg-yellow{% endif %}"><b>3</b></i>
        <div class="timeline-item">
            {% if object.current_stage == 'aspects_sel' %}
                <span class="time"><i class="fa fa-flag-o"></i> Current stage</span>
            {% endif %}
            <h3 class="timeline-header">Evaluation aspects</h3>
            {% if object.current_stage == 'aspects_sel' or object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}
            <div class="timeline-body">
                <ul class="nav nav-pills nav-stacked">
                    {% for aspect in object.evaluation_aspects.all %}
                    <li><a href="{% url 'px_evaluation:detail_aspects' aspect.id %}">{{ aspect }}<span class="pull-right text-blue"><i class="fa fa-eye"></i></span></a></li>
                    {% empty %}
                    <span class="text-muted">No associated aspects</span>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </li>
    <!-- END timeline item -->
    <!-- timeline item -->
    <li>
        <i class="fa {% if object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}bg-blue{% endif %}"><b>4</b></i>
        <div class="timeline-item">
            {% if object.current_stage == 'methods_sel' %}
                <span class="time"><i class="fa fa-flag-o"></i> Current stage</span>
            {% endif %}
            <h3 class="timeline-header">Evaluation methods</h3>
            {% if object.current_stage == 'methods_sel' or object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}
            <div class="timeline-body">
                <ul class="nav nav-pills nav-stacked">
                    {% for method in object.evaluation_methods.all %}
                    <li><a href="{% url 'px_evaluation:detail_methods' method.id %}">{{ method }}<span class="pull-right text-blue"><i class="fa fa-eye"></i></span></a></li>
                    {% empty %}
                    <span class="text-muted">No associated methods</span>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </li>
    <!-- END timeline item -->
    <li>
        <i class="fa {% if object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}bg-purple{% endif %}"><b>5</b></i>
        <div class="timeline-item">
            {% if object.current_stage == 'instruments_sel' %}
                <span class="time"><i class="fa fa-flag-o"></i> Current stage</span>
            {% endif %}
            <h3 class="timeline-header">Evaluation instruments</h3>
            {% if object.current_stage == 'instruments_sel' or object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}
            <div class="timeline-body">
                <ul class="nav nav-pills nav-stacked">
                    {% for instrument in object.evaluation_instruments.all %}
                    <li><a href="{% url 'px_evaluation:detail_instruments' instrument.id %}">{{ instrument }}<span class="pull-right text-blue"><i class="fa fa-eye"></i></span></a></li>
                    {% empty %}
                    <span class="text-muted">No associated instruments</span>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </li>
    <!-- END timeline item -->
    <li>
        <i class="fa {% if object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}bg-maroon{% endif %}"><b>6</b></i>
        <div class="timeline-item">
            {% if object.current_stage == 'eval_prep' %}
                <span class="time"><i class="fa fa-flag-o"></i> Current stage</span>
            {% endif %}
            <h3 class="timeline-header">Evaluation plan</h3>
            {% if object.current_stage == 'eval_prep' or object.current_stage == 'report' or object.current_stage == 'finished' %}
            <div class="timeline-body">
                <ul class="nav nav-pills nav-stacked">
                    {% if object.evaluation_plan %}
                    <li><a target="_blank" href="{{ object.evaluation_plan.url }}"> {{ object.evaluation_plan.name }}<span class="pull-right text-blue"><i class="fa fa-download"></i></span></a></li>
                    {% else %}
                    <span class="text-muted">None</span>
                    {% endif %}
                </ul>
            </div>
            {% endif %}
        </div>
    </li>
    <!-- END timeline item -->
    <li>
        <i class="fa {% if object.current_stage == 'report' or object.current_stage == 'finished' %}bg-navy{% endif %}"><b>7</b></i>
        <div class="timeline-item">
            {% if object.current_stage == 'report' %}
                <span class="time"><i class="fa fa-flag-o"></i> Current stage</span>
            {% endif %}
            <h3 class="timeline-header">Evaluation Report</h3>
            {% if object.current_stage == 'report' or object.current_stage == 'finished' %}
            <div class="timeline-body">
                <ul class="nav nav-pills nav-stacked">
                    {% if object.evaluation_report %}
                    <li><a target="_blank" href="{{ object.evaluation_report.url }}"> {{ object.evaluation_report.name }}<span class="pull-right text-blue"><i class="fa fa-download"></i></span></a></li>
                    {% else %}
                    <span class="text-muted">None</span>
                    {% endif %}
                </ul>
            </div>
            {% endif %}
        </div>
    </li>
    <!-- END timeline item -->

    <li>
        <i class="fa fa-flag {% if object.current_stage == 'finished' %}bg-black{% endif %}"></i>
        {% if object.current_stage == 'finished' %}
        <div class="timeline-item">
            <span class="time"><i class="fa fa-flag-o"></i> Finished</span>
        </div>
        {% endif %}
    </li>
</ul>

{% endblock %}

{% block update_url %} {% url 'px_evaluation:update' object.id %} {% endblock %}
{% block list_url %} {% url 'px_evaluation:list' %} {% endblock %}

{% block additional_footer_buttons %}
    {% if object.current_stage != 'report' %}
        <a href="{% url 'px_evaluation:continue' object.id %}" class="btn btn-primary">Continue Evaluation</a>
    {% endif %}
{% endblock %}